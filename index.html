<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>Hello there, stranger.</title>
  <meta name="GENERATOR" content="Blackfriday Markdown Processor v1.5" />
  <meta charset="utf-8" />
</head>
<body>

<h1>Hello there, stranger.</h1>

<h2>About</h2>

<p>This is a log of things I learn, experiment with, or think about.</p>

<h2 id="1525816236"><a href="index.html#1525816236">ðŸ”–</a> 1525816236 - 20180508</h2>

<p>I could not install <a href="https://research.swtch.com/vgo">vgo</a> as part of its <a href="https://research.swtch.com/vgo-tour">tour</a>, ironically because my system didn&rsquo;t meet the minimum version requirement of Go 1.10, and more specifically (and more ironically) because the Go 1.9 was a mere 4 days before a commit needed for <code>vgo</code>!</p>

<pre><code>$ go get -u golang.org/x/vgo

# golang.org/x/vgo/vendor/cmd/go/internal/modfetch/gitrepo
/opt/ir/src/golang.org/x/vgo/vendor/cmd/go/internal/modfetch/gitrepo/fetch.go:404:21: r.File[0].Modified undefined (type *zip.File has no field or method Modified)

$ go version
go version go1.9 darwin/amd64

$ cd $GOROOT; git log -1 --pretty='%cd %H %s'
Thu Aug 24 20:52:14 2017 +0000 c8aec4095e089ff6ac50d18e97c3f46561f14f48 [release-branch.go1.9] go1.9

$ git checkout master

$ git blame -L `egrep -n 'Modified\s+time.Time' $GOROOT/src/archive/zip/struct.go | cut -d: -f1`,+1 $GOROOT/src/archive/zip/struct.go
6e8894d5ffc (Joe Tsai 2017-08-28 12:07:58 -0700 119)    Modified     time.Time
</code></pre>

<h2 id="1525813299"><a href="index.html#1525813299">ðŸ”–</a> 1525813299 - 20180508</h2>

<p>I was able to get a tiny, tiny code change merged into <a href="https://github.com/google/gvisor">gVisor</a>.</p>

<p>Taking reading David Walsh&rsquo;s <a href="https://davidwalsh.name/conquering-impostor-syndrome">article</a> about conquering Imposter Syndrome, I decided to try achieving a &ldquo;little win.&rdquo;</p>

<p>Later the same day, I was reading documentation in the newly published <a href="https://github.com/google/gvisor">gVisor source code</a> and saw a typo.  I had to use Gerrit at work for years, so after a bit of configuring I was able to create <a href="https://gvisor-review.googlesource.com/c/gvisor/+/1820">a code review</a> that was later merged as a github <a href="https://github.com/google/gvisor/commit/4394b31dbbe276440891de0d8ee66bc5209400f1">pull request</a>.</p>

<h2 id="1523383234"><a href="index.html#1523383234">ðŸ”–</a> 1523383234 - 20180410</h2>

<p>My trusty ASUS 10.1 inch Chromebook Flip has been a solid machine for writing golang code and <a href="https://github.com/aoeu/gosh">my command line tools</a> on 30 minute train commute, and even DJing an entire hours-long set via crouton, XFCE, MIXXX, a FiiO USB DAC used simulatenously with the built-in audio card, and one of my MID controllers.</p>

<p>The screen chassis is now taped together from all the rough weather it has withstood. I thought I&rsquo;d try upgrading with:</p>

<pre><code>$amsung 12.3&quot; QHD Touchscreen Chromebook-Plus  
$349.99  
Sold by W00t, Inc.  
Condition: Factory Reconditioned  
Screen Size: 12.3&quot;  
</code></pre>

<p>I liked the USB-C ports, the stylus, the 4:3 screen ratio with really nice resolution and colors, and the all aluminum body.</p>

<p><a href="https://twitter.com/traverser/status/982617066388770816">I didn&rsquo;t like</a> the &ldquo;phantom input&rdquo; on the touch-screen, and apparently I wasn&rsquo;t the only one with this problem according to <a href="https://us.community.samsung.com/t5/Computers/Chromebook-plus-touchscree-issue/td-p/77098/page/4">10 pages of issues on the support forums</a>.</p>

<p>So, back from whence it came. Holding and typing on my ASUS Flip again, it somehow feels more sturdy and nicer to type anyway, all while being more portable and cheaper. It&rsquo;d just be nice to have some faster USB ports and more RAM&hellip;.</p>

<h2 id="1507682244"><a href="index.html#1507682244">ðŸ”–</a> 1507682244 - 20171010</h2>

<p>I was recently at a technology conference where there was <a href="https://chris.banes.me/dcnyc17">a talk</a> on Android apps, <a href="https://duckduckgo.com/?q=android+status+bar&amp;t=ffab&amp;iar=images&amp;iax=1&amp;ia=images&amp;iai=http%3A%2F%2Ftechviral.com%2Fwp-content%2Fuploads%2F2015%2F12%2FAdd-Network-Speed-indicator-in-Android-Status-Bar.jpg">the Android status bar</a>, &ldquo;no bezel&rdquo; smartphones (like the <a href="http://phandroid.com/2017/07/31/essential-phone-status-bar/">PH-1</a>), and how these things collide into a user-facing problem for some Android apps.</p>

<p>The speaker cleary explained the &ldquo;what&rdquo; and the &ldquo;why,&rdquo; but not a complete example of &ldquo;how&rdquo; for the solution.</p>

<p>The catalyst of the problem is when an Android app:</p>

<ul>
<li>doesn&rsquo;t have an <a href="https://developer.android.com/training/appbar/index.html">app bar</a>.</li>
<li>has a background-image (xor header image), that draws some fancy stuff behind a transparent status bar, and fills up the space where the app bar would normally be.</li>
<li>has a custom app bar (made only from core widgets like LinearLayout, TextView, and ImageView, possibly due to difficulties with the API-provided <a href="https://stackoverflow.com/search?q=app+bar+%5Bandroid%5D">app bar</a> / <a href="https://stackoverflow.com/search?q=action+bar+%5Bandroid%5D">action bar</a> and what can go wrong with using Compat and Support libraries, but worthy of a disparate argument for simplicity).</li>
</ul>

<p>The <a href="https://photos.app.goo.gl/qZyZ9xwKFya602xs1">explicitly discouraged soultion</a> is to hard-code the size of the status bar in layout files, even as an identified dimenion used across multiple layout files:</p>

<pre><code>&gt; find . -name 'dimens.xml' | xargs grep status_bar

  &lt;dimen name=&quot;status_bar_height&quot;&gt;24dp&lt;/dimen&gt;
  &lt;dimen name=&quot;app_bar_height_plus_status_bar_height&quot;&gt;80dp&lt;/dimen&gt;
  &lt;dimen name=&quot;header_photo_height_plus_status_bar_height&quot;&gt;224dp&lt;/dimen&gt;
  &lt;dimen name=&quot;negative_status_bar_height&quot;&gt;-24dp&lt;/dimen&gt;

&gt; # You aren't supposed to hardcode status bar values like this Android resource XML files.
</code></pre>

<p>The <a href="https://photos.app.goo.gl/VYcHBZcUESYTTYYb2">recommended solution</a> is to obtain the status bar height at runtime and apply it to the relevant view. If you have to do that in Java, here is a complete example:</p>

<pre><code>class TransparentStatusBarHaver extends Activity {

	@Nullable View viewThatSitsBelowTheTransparentStatusBar;

	public void onCreate(Bundle stuff) {
		super.onCreate(stuff);
		setContentView(R.layout.activity_with_transparent_status_bar);
		viewThatSitsBelowTheTransparentStatusBar = findViewById(R.id.view_that_sits_below_transparent_status_bar);
	}


	// Set heights that compensate for a transparent status bar 
	// in onPostCreate(...) instead of onCreate(...) since descendant activity classes 
	// get a chance to call setContentView(...) in their own onCreate(...) method.
	public void onPostCreate(Bundle stuff) {
		super.onPostCreate(stuff);
		if (viewThatSitsBelowTheTransparentStatusBar == null) {
			return;
		}
		ViewCompat.setOnApplyWindowInsetsListener(viewThatSitsBelowTheTransparentStatusBar,
				new android.support.v4.view.OnApplyWindowInsetsListener() {
					@Override
					public WindowInsetsCompat onApplyWindowInsets(
							View view,
							WindowInsetsCompat windowInsetsCompat) {
						int statusBarHeightInPixels = windowInsetsCompat.getSystemWindowInsetTop();
						int currentHeightOfViewInPixels = view.getLayoutParams().height;
						view.getLayoutParams().height = statusBarHeightInPixels + currentHeightOfViewInPixels;
						view.setLayoutParams(view.getLayoutParams());
						view.setPadding(
								view.getPaddingLeft(),
								statusBarHeightInPixels,
								view.getPaddingRight(),
								view.getPaddingBottom()
						);
						return windowInsetsCompat;
					}
				}
		);
	}

}
</code></pre>

<p>I was at the original talk, squinted through the Kotlin pseudo-code, looked up the docs myself, and wrote the above example, and it is <strong>still</strong> hard to understand the above code (or why it exists) at a glance.<br />
So this solution gives us the &ldquo;how,&rdquo; but then obfuscates the &ldquo;why&rdquo; that was so well explained in the talk.</p>

<p>To help convey what is going on and why, I tried distilling the code by using named-methods and named-parameters to provide a little more clarity to the anonymous-classes, unexpectedly-named interfaces, and verbose Android API calls:</p>

<pre><code>class TransparentStatusBarHaver extends Activity {

	@Nullable View viewThatSitsBelowTheTransparentStatusBar;

	public void onCreate(Bundle stuff) {
		super.onCreate(stuff);
		setContentView(R.layout.activity_with_transparent_status_bar);
		viewThatSitsBelowTheTransparentStatusBar = findViewById(R.id.view_that_sits_below_transparent_status_bar);
	}

	@Override
  	protected void onPostCreate(Bundle savedInstanceState) {
    		super.onPostCreate(savedInstanceState);
		StatusBarMeasurer.addHeightForTransparentStatusBar(viewThatSitsBelowTheTransparentStatusBar);
	}
}

public class StatusBarMeasurer implements OnApplyWindowInsetsListener {

	static public void addHeightForTransparentStatusBar(final View viewBelowStatusBar) {
		if (viewBelowStatusBar == null) {
			return;
		}
		ViewCompat.setOnApplyWindowInsetsListener(viewBelowStatusBar, new StatusBarMeasurer());
	}

	@Override
	public WindowInsetsCompat onApplyWindowInsets(View view, WindowInsetsCompat windowInsetsCompat) {
		onStatusBarMeasured(view, windowInsetsCompat);
		return windowInsetsCompat;
	}

	private void onStatusBarMeasured(View viewBelowStatusBar, WindowInsetsCompat windowInsetsCompat) {
		int statusBarHeightInPixels = windowInsetsCompat.getSystemWindowInsetTop());
		incrementHeight(viewBelowStatusBar, statusBarHeightInPixels);
		incrementTopPadding(viewBelowStatusBar, statusBarHeightInPixels);
	}

	public static void incrementHeight(View v, int additionalHeightInPixels) {
		int currentHeightInPixels = v.getLayoutParams().height;
		v.getLayoutParams().height = currentHeightInPixels + additionalHeightInPixels;
		v.setLayoutParams(v.getLayoutParams());
	}

	public static void incrementTopPadding(View v, int additionalPaddingInPixels) {
		v.setLayoutParams(v.getLayoutParams());
		v.setPadding(v.getPaddingLeft(), additionalPaddingInPixels, v.getPaddingRight(), v.getPaddingBottom());
	}
}

</code></pre>

<p>That&rsquo;s a bit easier for me to follow, but I do wonder:</p>

<ul>
<li>Why isn&rsquo;t there an Android API call that just returns the status bar height?</li>
<li>Why does the programmer have to know about WindowInsets, support libraries, and WindowInsetsCompat shim-code to implement the suggested solution?</li>
<li>Why is it so easy for programmers to get bit by Android, status bars, transparent status bar, and unexpected side-effects in the first place?</li>
</ul>

<h2 id="1496155760"><a href="index.html#1496155760">ðŸ”–</a> 1496155760 - 20170530</h2>

<p>I recently rediscovered <a href="http://justinhileman.info/article/git-pretty/">this helpful and entertaining flow-chart diagram, titled <em>git pretty</em>,</a> that starts with: &ldquo;So, you have a mess on your hands.&rdquo;</p>

<h2 id="1487031425"><a href="index.html#1487031425">ðŸ”–</a> 1487031425 - 20170213</h2>

<p><a href="https://github.com/Benjamin-Dobell/Heimdall">Heimdall</a> has instructions to build with dependent libraries installed via <a href="https://brew.sh">homebrew</a>.
Heimdall can also be built with the the dependent libraries installed via <a href="https://www.macports.org">macports</a>, but with some <a href="https://en.wikipedia.org/wiki/Kludge">kludging</a>.</p>

<p>Assuming that macports installs libraries under &lsquo;/opt/local/lib&rsquo; (e.g. the default for macports):</p>

<pre><code>$ git clone git@github.com:Benjamin-Dobell/Heimdall.git
$ cd Heimdall
$ tail OSX/README.txt | grep 'brew install' | sed 's/brew/port/g'
$ sudo port install libusb qt5 cmake
$ mkdir build
$ cd build
$ cmake -G &quot;Unix Makefiles&quot; -DCMAKE_BUILD_TYPE=Release -DQt5Widgets_DIR=`find /opt/local/lib -name 'Qt5Widgets'` ..
$ echo &quot;A linker error will happen during `make` that looks like this:&quot;
$ cat &lt;&lt; EOF
[ 53%] Linking CXX executable ../bin/heimdall
ld: library not found for -lusb-1.0
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make[2]: *** [bin/heimdall] Error 1
make[1]: *** [heimdall/CMakeFiles/heimdall.dir/all] Error 2
make: *** [all] Error 2
EOF
$ make
$ cat heimdall/CMakeFiles/heimdall.dir/link.txt | sed 's/\(-lusb-1.0\)/-L\/opt\/local\/lib \1/'
$ cd heimdall &amp;&amp; /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/c++    -std=gnu++11 -O3 -DNDEBUG -Wl,-search_paths_first -Wl,-headerpad_max_install_names  CMakeFiles/heimdall.dir/source/Arguments.cpp.o CMakeFiles/heimdall.dir/source/BridgeManager.cpp.o CMakeFiles/heimdall.dir/source/ClosePcScreenAction.cpp.o CMakeFiles/heimdall.dir/source/DetectAction.cpp.o CMakeFiles/heimdall.dir/source/DownloadPitAction.cpp.o CMakeFiles/heimdall.dir/source/FlashAction.cpp.o CMakeFiles/heimdall.dir/source/HelpAction.cpp.o CMakeFiles/heimdall.dir/source/InfoAction.cpp.o CMakeFiles/heimdall.dir/source/Interface.cpp.o CMakeFiles/heimdall.dir/source/main.cpp.o CMakeFiles/heimdall.dir/source/PrintPitAction.cpp.o CMakeFiles/heimdall.dir/source/Utility.cpp.o CMakeFiles/heimdall.dir/source/VersionAction.cpp.o  -o ../bin/heimdall  ../libpit/libpit.a -L/opt/local/lib -lusb-1.0
$ ../bin/heimdall version
$ echo &quot;Thus concludes the kludge.&quot; &amp;&amp; \
cp ../bin/heimdall $SOME_DIRECTORY_IN_YOUR_PATH_WHERE_YOU_KEEP_BINARIES/heimdall
</code></pre>

<h2 id="1486765292"><a href="index.html#1486765292">ðŸ”–</a> 1486765292 - 20170210</h2>

<p>Searching for edits of a file, by name, through a range of git commits:</p>

<pre><code>#!/bin/sh
for arg in &quot;$@&quot;
do
case $arg in
	-for=*)
		filename=&quot;${arg#*=}&quot;
	;;
	-from=*)
		startSHA=&quot;${arg#*=}&quot;
	;;
	-to=*)
		endSHA=&quot;${arg#*=}&quot;
	;;
esac
done
test '' = &quot;$endSHA&quot; &amp;&amp; endSHA=&quot;HEAD&quot;


for sha in `git log --pretty=&quot;%H&quot; $startSHA..$endSHA` ; do git diff-tree --no-commit-id --name-only -r $sha | grep &quot;$filename&quot; &amp;&amp; echo &quot;$filename was editied in commit $sha&quot;; done
</code></pre>

<p>Usage:</p>

<pre><code>search-git-for-edits -of='some_image_file.png' -from=a93b5f746bdb1e0054dbb7e37fdfcd84a73d7f85 -to=HEAD
</code></pre>

<h2 id="1486426704"><a href="index.html#1486426704">ðŸ”–</a> 1486426704 - 20170206</h2>

<p>Debugging animations within an Android app can be tricky, especially if there is a sufficient &ldquo;callback casserole&rdquo; of asynchronous server requests, click listeners, and animation listeners all swirled together.</p>

<p>A trick that helped me debug how and when callback methods were getting called was just a one-liner log statement:</p>

<pre><code>// Placed in various click-listener callbacks, asyncronous server request callbacks, and animation listener callbacks:
android.util.Log.e(&quot;aoeu&quot;, Log.getStackTraceForString(new Exception));
</code></pre>

<p>Monitored with:</p>

<pre><code>adb logcat '*:E' | grep aoeu
</code></pre>

<p>While logging stack-traces doesn&rsquo;t provide knowledge of what data was being input into methods, it was extremely useful to see how, in real-time, various callbacks were calling eachother without putting log statements in each method or stopping the world with a debugger.</p>

<h2 id="1485561815"><a href="index.html#1485561815">ðŸ”–</a> 1485561815 - 20170127</h2>

<p>At the moment, certain computers have USB-C ports while many Android devices do not.<br />
In attempts to not carry around <a href="https://en.wikipedia.org/wiki/USB-C">USB-C</a> to <a href="https://en.wikipedia.org/wiki/USB#Mini_and_micro_connectors">USB-Micro-B </a> converters, I thought that the <a href="https://en.wikipedia.org/wiki/Android_software_development#ADB">Android Debug Bridge</a> tool might be a practical replacement when run in a <a href="https://developer.android.com/studio/command-line/adb.html#wireless">wireless mode</a> that utilizes TCP/IP.</p>

<p>I was wrong.</p>

<p>The dance to boostrasp a computer to use Android Debug Bridge to communicate wirelessly to an Android device (starting out connected via a USB cable, but unplugged after) seemed straight-ahead enough.<br />
I found that arbitrary pauses in between <code>adb</code> commands were required in order to allow the Android Debug Bridge server to restart or reconfigure:</p>

<pre><code>#!/bin/sh
adb usb &amp;&amp; \
sleep 2 &amp;&amp; \
test `adb devices | wc -l` -gt 1 &amp;&amp; \
TCPIP_PORT=5555 &amp;&amp; \
sleep 2 &amp;&amp; \
adb tcpip $TCPIP_PORT &amp;&amp; \
sleep 2 &amp;&amp; \
DEVICE_IP=$(adb shell ip -f inet addr show wlan0 | grep inet | sed 's/^.*\([0-9]\{3\}\.[0-9]\{3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}\)\/24.*$/\1/')  &amp;&amp; \
adb connect $DEVICE_IP:$TCPIP_PORT
</code></pre>

<p>I then found that transferring a 21 megabyte file proved to be relatiely slow:</p>

<pre><code>$ time adb install -r molasses.apk
[100%] /data/local/tmp/molasses.apk
    pkg: /data/local/tmp/molasses.apk
Success

real    3m40.721s
</code></pre>

<p>If doing the napkin-math correctly, that&rsquo;s a transfer rate of  approximately 0.763 megabits per second.</p>

<p>That&rsquo;s also an order of magnitude (11 times) slower than installing the same file over USB:</p>

<pre><code>$ adb usb
restarting in USB mode
$ time adb install -r molasses.apk
[100%] /data/local/tmp/molasses.apk
	pkg: /data/local/tmp/molasses.apk
Success

real	0m19.989s
</code></pre>

<p>Technically, the wireless router could be part of the slow-down, but I doubt it.<br />
So, why is <code>adb</code> over TCP/IP so slow?</p>

<h2 id="1485388140"><a href="index.html#1485388140">ðŸ”–</a> 1485388140 - 20170125</h2>

<p>Today I learned that certain built-in shell commands, such as <code>echo</code> and <code>export</code>, <a href="http://www.grymoire.com/Unix/Sh.html#uh-14">can be validly executed on the same line</a>, without a semi-colon separating the statements.
I found some resulting commands I tried out did not result in what I expected.</p>

<pre><code>sh-3.2$ NUMS=ONE
sh-3.2$ echo $NUMS
ONE
sh-3.2$ NUMS=&quot;$NUMS, TWO&quot; export NUMS
sh-3.2$ echo $NUMS
ONE, TWO
sh-3.2$ NUMS=&quot;$NUMS, THREE&quot; echo $NUMS
ONE, TWO
sh-3.2$ NUMS=&quot;$NUMS, THREE&quot; export NUMS; echo $NUMS
ONE, TWO, THREE
sh-3.2$ NUMS=&quot;$NUMS, FOUR&quot; echo $NUMS; export NUMS
ONE, TWO, THREE
sh-3.2$ echo $NUMS
ONE, TWO, THREE
sh-3.2$ NUMS=&quot;$NUMS, FOUR&quot;; export NUMS
sh-3.2$ echo $NUMS
ONE, TWO, THREE, FOUR
</code></pre>

<p>Additionally, the PATH environment variable automatically exports when setting it to a new value within a shell script:</p>

<pre><code>$ cat path.sh
#!/bin/sh

overridePATH() {
	PATH='export is not required.'
}

overridePATH
echo $PATH
$ ./path.sh
export is not required.
</code></pre>

<h2 id="1437014448"><a href="index.html#1437014448">ðŸ”–</a> 1437014448 - 20150715</h2>

<p>I  wanted to install a gerrit server in order to do some code review for a friend, and thought an instance on a certain cloud hosting provider could be of service.</p>

<p>I ended up realizing that I was locked out of the server instance. I had ssh access disabled for the root user, so adding my public SSH key to the provider&rsquo;s admin panel proved to be useless.</p>

<p>The provider features a web-browser-based VNC console, but with some limitations. The web-browser-based console can not handle copy-paste commands from the user&rsquo;s machine. I wasn&rsquo;t about to type my entire public RSA key out by hand.  A workaround was needed:</p>

<ul>
<li>Reset root password on the remote server instance via an email authentication tool on the provider&rsquo;s host administration web-application.</li>
<li>Log in as the root user on the remote server instance via the provider&rsquo;s web-browser-based VNC console</li>
<li>Change root password (as forced by the remote server instance)</li>
<li><code># su - otheruser</code></li>
<li><code>$ mkdir ~/.ssh</code></li>
<li><code>$ chmod 700 ~/.ssh</code></li>
<li>On my local machine: <code>$ cat ~/.ssh/id_rsa.pub</code></li>
<li>Paste the contents of <code>id_rsa.pub</code> into a Github gist</li>
<li>Copy the raw URL of the Github gist</li>
<li>Paste the raw URL of the Github gist into <a href="http://tiny.cc`s">http://tiny.cc`s</a> web interface</li>
<li>Give the tiny.cc URL a reasonable name to type, like <a href="http://tiny.cc/publickeyfoo">http://tiny.cc/publickeyfoo</a></li>
<li>In the hosting provider&rsquo;s web-browser-based VNC console: <code>$ wget -o ~/.ssh/authorized_keys http://tiny.cc/publickeyfoo</code></li>
<li><code>$ chmod 600 ~/.ssh/authorized_keys</code></li>
<li><code>$ exit</code> to return to the root user</li>
<li><code># sudo echo &quot;PermitRootLogin no&quot; &gt;&gt; /etc/ssh/ssh_config</code></li>
<li>On my local machine, <code>$ ssh otheruser@example.com</code> (where example.com is the hostname for my remote server instance at the hosting provider).</li>
</ul>

<p>&hellip; And back in action. This would have been easier if the web-browser based VNC console wasn&rsquo;t randomly inserting control keys or otherwise locking upwhen typing all the commands!</p>

<h2 id="1434415672"><a href="index.html#1434415672">ðŸ”–</a> 1434415672 - 20150615</h2>

<p>While peer reviewing an article involving Git packfiles,
I found interesting usage of SHA-1 hash values.</p>

<p>Git hashes a <code>.pack</code> packfile with SHA-1 and then uses the hash value for 3 things:</p>

<ul>
<li>The hash value is as a 20-byte trailer to the <code>.pack</code> file itself for later use as a checksum.</li>
<li>The hash value is used within the file name of the <code>.pack</code> file.</li>
<li>The hash value is used within the file name of the corresponding <code>.idx</code> file.</li>
</ul>

<p>I thought the usage in filenames was interesting.</p>

<p>I wrote a small shell script to demonstrate it all:</p>

<pre><code>
#!/bin/sh

main() {
	cd $1/.git/objects/pack
	hash_value_in_filename=`ls pack-*.pack | sed 's/pack-\(.*\).pack/\1/'`
	hash_value_in_file=`tail -c 20 pack-*.pack | hexdump -ve '1/1 &quot;%.2x&quot;'`
	hash_value_of_file=`cp pack-*.pack /tmp/$$.pack &amp;&amp; \
		chmod u+w /tmp/$$.pack &amp;&amp; \
		truncate --size=-20 /tmp/$$.pack &amp;&amp; \
		sha1sum /tmp/$$.pack | cut -d' ' -f1 &amp;&amp; \
		rm /tmp/$$.pack`

	echo &quot;File names in Git pack:&quot;
	if test $hash_value_of_file = $hash_value_in_filename ; then 
		ls -1 pack-${hash_value_in_file}.*
	fi 
	echo &quot;$hash_value_in_file : SHA-1 hash value within the .pack file.&quot;
	echo &quot;$hash_value_of_file : SHA-1 hash value of the .pack file (minus the 20 byte trailer that is the previous hash.)&quot;
	echo &quot;$hash_value_in_filename : SHA-1 hash value in the filename itself.&quot;
	cd - &gt;/dev/null
}

exiterr() {
	echo &quot;usage: $0 directory_of_a_git_repository&quot;
	exit 1
}


if test $# -ne 1 ; then exiterr; fi

if test ! -d $1/.git ; then
	echo &quot;No git repository found in \&quot;$1\&quot;&quot;
	exiterr
fi

if test ! -d $1/.git/objects/pack ; then
	echo &quot;No pack directory found in git repostiory \&quot;$1\&quot;, run with a different repository.&quot;
	exiterr
fi

main $@
</code></pre>

<h2 id="1433476141"><a href="index.html#1433476141">ðŸ”–</a> 1433476141 - 20150604</h2>

<p>If attempting to compile and configure an Apple IIe / Apple IIGS emulator for demo-running purposes,
something like the shell-script below will get things going for Linux on x86_64 processors.</p>

<p>h/t @DaveyPocket for mentioning demos and helping to compile and sort through the quirks of setting up the emulator.</p>

<pre><code>
#!/bin/sh

main() {
  installDependencies()  &amp;&amp; \
  getKentsEmulatedGS() &amp;&amp; \
  buildKentsEmulatedGS_x86-64 &amp;&amp; \
  getROMs() &amp;&amp; \
  configureKentsEmulatedGS &amp;&amp; \
  runEmulatorWithSound()
} 

installDependencies() {
   sudo apt-get install -y build-essentials xorg-dev pulseaudio
}

getKentsEmulatedGS() {
  wget http://kegs.sourceforge.net/kegs.0.91.tar.gz
  tar xzvf kegs.0.91.tar.gz
}

buildKentsEmulatedGS_x86-64() {
  cd kegs.0.91
  rm vars; ln -s vars_x86linux vars
  sed --in-place '5s/march=.*$/march=amdfam10/'
  make
  cd ..
}

getROMs() {
  wget http://google-for-apple-ii-gs-rom_images.za/ftp.apple.asimov.net/emulators/rom_images/appleiigs_rom01.zip
  unzip appleiigs_rom01.zip 
  cp XGS.ROM ROM
  wget http://www.ninjaforce.com/downloads/NFCDemoDrive.zip
  unzip NFCDemoDrive.zip
}

configureKentsEmulatedGS() {
  sed --in-place '9s/^s7d1 = .*$/s7d1 = NFCDemoDrive.2mg/
}

runEmulatorWithSound() {
  padsp ./xkegs
}

runEmulatorWithoutSound() {
  ./xkegs --audio 0
}

</code></pre>

<h2 id="1432908829"><a href="index.html#1432908829">ðŸ”–</a> 1432908829 - 20150529</h2>

<p>I&rsquo;ve compiled plan9port again recently, and  ran into some errors caused by missing X libraries, both in Ubuntu and Debian.</p>

<p>There were other errors on Debian Jessie, but a mutual error on Ubuntu Precise was that the library header file X11/IntrinsicP.h could not be found.</p>

<p>The entire compilation and installation process from a  Ubuntu Precise install would be something like the following, although I&rsquo;ve not tested it and some steps may be missing:</p>

<pre><code>#!/bin/sh

main() {
    # repairPackageManagerState() # only if needed.
    installBuildTools()
    installPlan9PortDependencies()
    getAndCompileAndInstallPlan9Port()
}

repairPackageManagerState() {
    sudo dpkg --configure --pending
    sudo apt-get --fix-broken install
}

installBuildTools() {
    sudo apt-get install git
    sudo apt-get install build-essential
}

installPlan9PortDependencies() {
    sudo apt-get install libxt-dev libxext-devel
}

getAndCompileAndInstallPlan9Port() {
    cd $HOME
    git clone https://github.com/9fans/plan9port
    cd plan9port
    if test ./INSTALL ; then tail -2 install.log | sed 's/^\s\+//' &gt;&gt; $HOME/.profile ; fi
}

main()
</code></pre>

<p>This is also the first entry I&rsquo;ve made with the <a href="http://man.cat-v.org/plan_9/1/sam">sam</a> editor, and I could certainly stand to read over the manual page for it again.</p>

<h2 id="1429880922"><a href="index.html#1429880922">ðŸ”–</a> 1429880922 - 20150424</h2>

<p>I&rsquo;m reading about <a href="https://en.wikipedia.org/wiki/Init">init</a> very quickly.
It is the first process started at boot of a Un*x system, and runs
 as a daemon until shut down.</p>

<p>If one types <code>pstree | less</code> on some systems, one will see <code>init</code> as the root process.</p>

<p>Apparently, <a href="https://en.wikipedia.org/wiki/Systemd">systemd</a> is the name of several things:
&ldquo;systemd is not just the name of the init daemon but also refers to the entire software bundle around it&rdquo;</p>

<p>That &ldquo;software bundle&rdquo; around it, according to Wikipedia is:
- A system and service manager. (Does that mean daemons?)
- A software platform. (Also vague.)
- The glue between applications and the kernel.</p>

<p>It seems like a Bad Thing that there is lots of stuff that each do very different things,
 all under one name, or at a minimum, harder to understand and communicate about.</p>

<h2 id="1429620177"><a href="index.html#1429620177">ðŸ”–</a> 1429620177 - 20150421</h2>

<p>I spent a lot of the weekend resurrecting some older d3 code and building this thing:</p>

<ul>
<li><a href="http://www.mcdem.us/climate/c02e.html">http://www.mcdem.us/climate/c02e.html</a></li>
<li><a href="http://github.com/aoeu/climate">http://github.com/aoeu/climate</a></li>
</ul>

<p>The color experiments were for this.
d3 makes more sense than it used to, despite I haven&rsquo;t looked at it at all in the meanwhile.</p>

<p>It was suggested to add a slider, which I think is a good idea.</p>

<h2 id="1428886299"><a href="index.html#1428886299">ðŸ”–</a> 1428886299 - 20150412</h2>

<p>I&rsquo;m pulling some data sources I&rsquo;ll transform later for a project.
I&rsquo;m naming target directories after <em>filenames</em> and paths from the source URIs.
e.g <code>~/user/repo/data/sources/example.com/path/to/archive.zip/</code> is a directory with files in it.
To reiterate, the <code>archive.zip</code> component is a <em>directory</em>, and not the actual
zip file. The contents of the directory are the extracted contents of the source zip file.</p>

<p>The idea is to have the directory be a self-documenting reference to the source file.
However, this feels like it is being clever, and not clear.
I also wonder what ill-affects it would have on an unsuspecting shell script.</p>

<h2 id="1428778652"><a href="index.html#1428778652">ðŸ”–</a> 1428778652 - 20150411</h2>

<p>Why is <code>origin</code> the idiomatic name for a remote repository in
 most (if not all) of the git workflows that I&rsquo;ve seen?
 Naming the only remote repository the word <code>origin</code>
 implies that the remote is the true source of the code.
 Why isn&rsquo;t a <em>local</em> repository the true source of
 the code? Why not have the remote just serve as a backup?
 Why not have <em>many</em> backups, and name your remotes things
 like <code>github</code>, <code>bitbucket</code>, <code>my-raspberry-pi</code>, or
 <code>some-repo-alex-pulls-from</code>?
 Why not push to all those remotes simultaneously, instead of one?</p>

<h2 id="1428707143"><a href="index.html#1428707143">ðŸ”–</a> 1428707143 - 20150410</h2>

<p>I resurrected some years-old code based in d3, which has resulted
in pursuit of time-series data in a couple specific domains.</p>

<p>The fun part, however, is colors. Lots of colors!!</p>

<p>I ported and rewrote some older golang code that calculates
colors in HSL format and dumps them on a web page for previewing:</p>

<pre><code>$ ./gencolors -num 7 -preview 
</code></pre>

<div style='text-align: center; width: 64px; height: 64px; display: inline-block; background-color: #f20c42;'>#f20c42</div>

<div style='text-align: center; width: 64px; height: 64px; display: inline-block; background-color: #f2d107;'>#f2d107</div>

<div style='text-align: center; width: 64px; height: 64px; display: inline-block; background-color: #4ef2cc;'>#4ef2cc</div>

<div style='text-align: center; width: 64px; height: 64px; display: inline-block; background-color: #0cf28f;'>#0cf28f</div>

<div style='text-align: center; width: 64px; height: 64px; display: inline-block; background-color: #0c8ff2;'>#0c8ff2</div>

<div style='text-align: center; width: 64px; height: 64px; display: inline-block; background-color: #4e0cf2;'>#4e0cf2</div>

<div style='text-align: center; width: 64px; height: 64px; display: inline-block; background-color: #f20cd1;'>#f20cd1</div>
    

<p>This lead to some digging around with how the python <code>colorsys</code> module
is implemented, and how to escape potentially unsafe CSS or HTML in
Go&rsquo;s html/template package. (Hint: supply a function map to the
template before executing.)</p>

<p>The resulting colors themselves are pretty useless.
Colors with marginally different hue settings in HSL
can have very little perceivable difference, and the
algorithms don&rsquo;t consider persons with color-blindness.
They look kind of pretty on a web page, though.</p>

<p>I found some stock color sets (&ldquo;alphabets&rdquo;) from a couple research articles
that look more promising. I&rsquo;ll add these into the library as well as
constants. There&rsquo;s not really a goal for the library other than to
document what I&rsquo;m learning as I go, and maybe provide usage for someone
else since it is open source.</p>

<h2 id="1428497189"><a href="index.html#1428497189">ðŸ”–</a> 1428497189 - 20150408</h2>

<p>I accidentally filled up my Chromebook hard drive pulling down docker
(with the intention of trying out the golang mobile stuff for android).
I couldn&rsquo;t log into my main user account anymore!!</p>

<p>I ended up getting in through the Guest log in, opening crosh in the browser,
and purging some bigger directories&hellip; one of them being the emacs source
( ~600mB ) and another being android-studio ( &gt; ~700mB ).  Not surprisingly,
android-studio binaries are bigger than the entire emacs git repository.
Both directories are huge. +1 for line editors.</p>

<p>I ended up getting more low-profile USB 3 drives to mitigate, which lead to
<a href="https://twitter.com/tmcdemus/status/585490679339610113">some</a>
<a href="https://twitter.com/tmcdemus/status/585495257242021888">discussions</a> about
what filesystem to format the drives with.</p>

<p>I&rsquo;ll try one of the drives out as btrfs since that&rsquo;s supported in back-ports.
Chrome OS itself will not recognize that drive, but that might be a feature.</p>

<p>ext4 is the reasonable choice - it is supported out-of-the-box on
any linux distro I can think of (and therefore is present on live-boot images).</p>

<h2 id="1428410883"><a href="index.html#1428410883">ðŸ”–</a> 1428410883 - 20150407</h2>

<p>Over the weekend, I wrote a simple HTTP request header and body
&ldquo;echoer&rdquo; in golang. I went through a couple refactors thanks
to Jay giving me some code review.</p>

<p>I may have found a bug in the standard libraries.</p>

<p>I ended up pulling down the Go source on another machine and doing
some experiments back and forth between the two.
I wanted to confirm that the problem wasn&rsquo;t from me running the program
on localhost. Something does seems wrong.</p>

<p>I think the next step would be searching around the code base
and see what else calls the relevant function&hellip; maybe the documentation
is wrong, or maybe my usage is wrong, or maybe there really is a bug
and this function should check for zero values and provide defaults
based on what it does next.</p>

<h2 id="1428025541"><a href="index.html#1428025541">ðŸ”–</a> 1428025541 - 20150402</h2>

<p>Today, I learned some security things over lunch with someone.
They were nice enough to answer a bunch of questions I had about
that part of the field. It is less of a blackbox, at least.</p>

<p>In the evening, I paired with someone on crypto exercises in golang.
That was fun and relatively productive.
We found bugs in the exercise.</p>

<p>I shared with a person that is new to golang how to use interfaces
and struct composition in Go with some code I wrote:</p>

<ul>
<li><a href="https://play.golang.org/p/5rQ7LgR3Wl">interface example</a></li>
<li><a href="http://play.golang.org/p/orGE20_VSk">struct composition example</a></li>
</ul>

<p>It seems like the person found it helpful.
That made me feel productive, and I can imagine what the language
must look like if you&rsquo;re coming from python and not C / C++/ J*va.
It is nice to help dispell some of the things that confused me, too.</p>

<h2 id="1427983169"><a href="index.html#1427983169">ðŸ”–</a> 1427983169 - 20150402</h2>

<p>I fell asleep while pulling down GCC on Arch on the Pi, but
I was able to successfully compile a program using portmidi on the Pi
this morning.</p>

<p>I was also able to cross compile a program for ARM 6 / Arch on
from a debian instance. I recompiled Go 1.5 with CGO enabled,
but I forgot that I also need some mechanism to cross compile
the C for ARM 6 / Arch also! That&rsquo;s a project for later.</p>

<h2 id="1427944190"><a href="index.html#1427944190">ðŸ”–</a> 1427944190 - 20150401</h2>

<p>I&rsquo;ve learned and tweaked a few things.</p>

<ul>
<li>In vim, use <code>set shell=/bin/sh</code> to set a specific shell.</li>
<li>In vim, <code>:r !./tools/timestamp</code> now creates a timestamp.</li>
<li>I&rsquo;m ditching pandoc for &ldquo;blackfriday&rdquo;
-- blackfriday does just markdown to HTML conversion (do one thing and one thing well) vs. pandoc, which converts many formats to many others.
-- blackfriday is written in Go, so I currently will be able to edit it more easily than pandoc, which is written in Haskell.</li>
<li>I added a Makefile to make building a little easier.</li>
</ul>

<p>blackfriday is also the first thing I built with Go 1.5 pre-release, using
<a href="http://dave.cheney.net/2015/03/03/cross-compilation-just-got-a-whole-lot-better-in-go-1-5">Dave Cheney&rsquo;s instructions</a>
as a reference.
I just compiled and bootstrapped Go 1.5 a bit ago.
The goal is to cross compile for ARM 6 so I can run some golang
sound generating programs on the Raspberry Pi Arch Linux installation
I set up last night.</p>

<p>Earlier tonigt, bcgraham and I also got some bug fixes
and enhancements merged into
<a href="http://github.com/aoeu/mta">http://github.com/aoeu/mta</a>, and we can deployed to <a href="http://mta.today">http://mta.today</a>.
The result is pretty nice to use from <code>w3m</code> since the tables and
and everything get rendered correctly now.</p>

<h2 id="1427927658"><a href="index.html#1427927658">ðŸ”–</a> 1427927658 - 20150401</h2>

<p>I moved the markdown file from the llog repository into a github pages repostiory.<br />
I&rsquo;ve been thinking about doing something like this for a while - I gets lots of ideas of things to jot down and write, but I&rsquo;d like the simplest possible mechanisms to author and publish.</p>

<p>I&rsquo;ve added some complexity by relying on pandoc to generate an HTML page file from the markdown, but this seems simpler than using some of the other popular tools out there.</p>

<p>All I did was:</p>

<ul>
<li>Create a repostiory on github called <code>aoeu.github.io</code></li>
<li><code>git clone https://github.com/aoeu/aoeu.github.io.git</code></li>
<li><code>git clone https://github.com/aoeu/llog.git</code></li>
<li><code>git remote add master master</code></li>
<li><code>git pull master master</code></li>
<li><code>ls -a llog.md</code></li>
<li><code>git remote rm master</code></li>
<li><code>pandoc -s llog.md -o index.html</code></li>
<li><code>git push origin master</code></li>
<li><code>w3m https://aoeu.github.io</code></li>
</ul>

<p>I&rsquo;d rather get something even simpler in place, but this setup will do for now.</p>

<h2 id="1421676983"><a href="index.html#1421676983">ðŸ”–</a> 1421676983 - 20150119</h2>

<p>An idiom for logging to Standard Error and exiting with error status in golang:
- <code>log.Fatal(&quot;an error explanation&quot;)</code> will log to standard error and exit.
- You can remove the &ldquo;timestamp&rdquo; prefix of the log message with <code>log.SetFlags(0)</code>
- You can set a custom prefix with <code>log.SetPrefix(someString + &quot;: &quot;)</code></p>

<p>Also, Go&rsquo;s <code>net/url.Parse</code> is just wrapping and calling <code>net/url.ParseRequestURI</code> and bypassing some of the latter&rsquo;s error checking.
(<code>ParseRequestURI</code> is intended for full URI&rsquo;s specifiying an encoding, etc.)</p>

<h2>20141026</h2>

<ul>
<li>Install crouton / i3</li>
<li>Install java, newer than version 6. Try something like:
-- <code>sudo apt-get install openjdk-7-jdk'
--</code>sudo update-alternatives --config java`</li>
<li>Download Android Studio: <a href="https://developer.android.com/sdk/installing/studio.html">https://developer.android.com/sdk/installing/studio.html</a></li>
<li><code>tar xzvf android-studio-bundle-135.1339820-linux.tgz</code></li>
<li><code>cd android-studio/bin; ./studio.sh</code></li>
</ul>

<p>Waiting for Java to insall, gradle to get dependencies, and Android Studio takes some time.</p>

<p>Other light amounts of magic I required:
Set X to run from regular users: <code>
sudo ed /etc/X11/Xwrapper.config 
,s/console/anybody/
wq
</code>
For weird libstdc++6.so errors from <code>adb</code> : <code>sudo apt-get install lib32stdc++6 lib32z1 lib32z1-dev</code></p>

<h2>20141012</h2>

<p>Today, I&rsquo;m thinking about email hygeine.
The idea here is to remove oneself from mailing lists or other uneccessary,
noisey messages.</p>

<p>I haven&rsquo;t thought of a great way to do this yet programatically.</p>

<p>One possible algorithm or method:
- Open your mail box.
- Go through every message for a day (or part of day).
- Click unsubscribe on noisey, unecessary mail messages.</p>

<h2>20140904 : 1409869214</h2>

<h3>Today, I thought about primitive alternatives to <code>pbcopy</code></h3>

<p>If you&rsquo;re using OS X, you can move data from the terminal to the clipboard with
the <code>pbcopy</code> command.  If you have X, you can use <code>xclip</code>.</p>

<p>A way that I like better is using temporary files:
- <code>date &gt; /tmp/today.txt</code> Append some arbitrary data to a text file (instead of a clipboard).
- <code>vim some_file.txt</code> Edit an arbitrary file.
-  <code>:r /tmp/today.txt</code> Insert the data from the arbitary after the current cursorline.</p>

<p>Appending text may have been a more reasonable alternative:
<code>date &gt;&gt; some_file.txt</code></p>

<h3>Today, I decided to start a blog in markdown, even if it is just local.</h3>

<p>I&rsquo;ve decided to call it a &ldquo;llog&rdquo;.</p>

<h3>Today, I firewalled a new server.</h3>

<p>I mostly followed instructions here: <a href="https://www.linode.com/docs/security/securing-your-server">https://www.linode.com/docs/security/securing-your-server</a>
And then I skimmed some info from the arch wiki: <a href="https://wiki.archlinux.org/index.php/iptables">https://wiki.archlinux.org/index.php/iptables</a></p>

</body>
</html>
